<!DOCTYPE html>
<html lang="zh">
<head>
<title>HITszQAbot è¿ç§»è®°å½• | Thoughts Memo</title>
<meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="HITszQAbot è¿ç§»è®°å½• | Thoughts Memo">
<meta property="og:site_name" content="Thoughts Memo">
<meta property="og:url" content="https://zhuanlan.zhihu.com/p/363342119">
<meta property="twitter:card" content="summary">
<meta name="twitter:title" property="og:title" itemprop="name" content="HITszQAbot è¿ç§»è®°å½• | Thoughts Memo">
<meta name="twitter:description" property="og:description" itemprop="description" content="æœ¬æ–‡ä½¿ç”¨ Zhihu On VSCode åˆ›ä½œå¹¶å‘å¸ƒå‰æƒ…æè¦åœ¨å¤§ä¸€å¤§äºŒæœŸé—´ç»´æŠ¤æ‹›ç”Ÿæœºå™¨äººå°å“ˆä¹Ÿâ€¦">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<link rel="alternate" type="application/rss+xml" title="Thoughts Memo" href="https://l-m-sherlock.github.io/ZhiHuArchive/feed.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/yue.css@0.4.0/yue.css">
<script>
const redirect = false;
if (redirect) {
window.location.replace("https://zhuanlan.zhihu.com/p/363342119");
}
</script>
<style>
.origin_image {
width: 100%;
}
figure {
margin:1.4em 0;
}
figure img {
width: 100%;
}
img {
vertical-align: middle;
}
.author {
display: flex;
gap: 1em;
}
#avatar {
width: 100px;
height: 100px;
}
.author > div {
flex: 1;
}
a[data-draft-type="link-card"] {
   display: block;
}
</style>
</head>
<body style="max-width: 1000px; margin: 0 auto; padding: 0 1em 0 1em;" class="yue">
<header>
<img class="origin_image" src="https://pica.zhimg.com/v2-eb4aa092b951a4ac67e12fdcec61d733_720w.jpg?source=b1748391"/>
<h1><a href="https://zhuanlan.zhihu.com/p/363342119">HITszQAbot è¿ç§»è®°å½•</a></h1>
<div class="author">
<img class="avatar" id="avatar" src="https://pica.zhimg.com/50/v2-41f893b0cd84fb6a8c8f6d1bd29c9554_l.jpg?source=b1748391" />
<div>
<h2 rel="author">
<a href="https://api.zhihu.com/people/4c592f496dc33822b560b382907ff1d0" target="_blank">@Thoughts Memo</a>
</h2>
<p> å­¦æ ¡â‰ æ•™è‚²â‰ æŠ€èƒ½ï¼›æ–‡å‡­æº¢ä»·=80%ä¿¡å·ä¼ é€’+20%äººåŠ›èµ„æœ¬ </p>
</div>
</div>
<time datetime="2021-04-08T13:35:01">å‘è¡¨äº 2021å¹´04æœˆ08æ—¥</time>
<p rel="stats"style="color: #999; font-size: 0.9em;">16 ğŸ‘ / 5 ğŸ’¬</p>
</header>
<article>
<blockquote data-pid="BWNdglR7">æœ¬æ–‡ä½¿ç”¨ <a href="https://zhuanlan.zhihu.com/p/106057556" class="internal">Zhihu On VSCode</a> åˆ›ä½œå¹¶å‘å¸ƒ</blockquote><h2>å‰æƒ…æè¦</h2><p data-pid="tBn2vxKw">åœ¨å¤§ä¸€å¤§äºŒæœŸé—´ç»´æŠ¤æ‹›ç”Ÿæœºå™¨äººå°å“ˆä¹Ÿç®—æˆ‘çš„ä¸€é¡¹ä¸šä½™çˆ±å¥½ï¼Œè¿™ä¸ªé¡¹ç›®çš„å…·ä½“å†…å®¹è¯·è§ï¼š</p><a href="./158186707.html" data-draft-node="block" data-draft-type="link-card" data-image="https://pica.zhimg.com/v2-fb73f360458689913573e39efefd6e46_180x120.jpg" data-image-width="1920" data-image-height="1015" class="internal">å¶å³»å³£ï¼šHITszQAbot é¡¹ç›®è®°å½•</a><p data-pid="i9MEFh81">ç„¶è€Œå»å¹´æš‘å‡ TX æ€äº†ä¸€æ‰¹ qq æœºå™¨äººï¼Œå°å“ˆæ‰€ä¾èµ–çš„é…·Qä¹Ÿæœªèƒ½å¹¸å…äºéš¾ï¼š</p><a href="./1378155870.html" data-draft-node="block" data-draft-type="link-card" data-image="https://picx.zhimg.com/v2-55134e6715722766cefb7545c5f434d5_ipico.jpg" data-image-width="651" data-image-height="746" class="internal">å¦‚ä½•çœ‹å¾…ç»§æ™¨é£æœºå™¨äººåï¼Œå„æœºå™¨äººå®£å¸ƒå…³é—­ï¼Ÿ</a><p data-pid="LCI1t7KA">ä»‹äºå½“æ—¶æ‹›ç”Ÿæ´»åŠ¨å·²ç»è¿›å…¥å°¾å£°ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å¤ªå¤šç²¾åŠ›å°†å°å“ˆçš„ä¾èµ–è½¬ç§»åˆ°å…¶å®ƒ qq æœºå™¨äººï¼ˆä¼¼ä¹é‚£ä¸ªæ—¶å€™åªæœ‰ mirai å­˜æ´»ï¼‰ã€‚</p><p data-pid="YqtfdGPa">å¤§åŠå¹´è¿‡å»äº†ï¼Œä¸€å¹´ä¸€åº¦çš„æ‹›ç”Ÿå­£åˆè¦æ¥äº†ï¼Œæˆ‘ä¹Ÿæ­£å¥½æŠ½ç©ºçœ‹çœ‹æœ‰æ²¡æœ‰è¾ƒå¥½çš„è¿ç§»æ–¹æ¡ˆã€‚</p><p data-pid="92URRgRq">è¿™æ¬¡æˆ‘é€‰æ‹©äº† nonebot çš„å‡çº§ç‰ˆâ€”â€”<a href="https://v2.nonebot.dev/" class=" wrap external" target="_blank" rel="nofollow noreferrer">nonebot2</a> ä½œä¸º qq æœºå™¨äººå¼€å‘æ¡†æ¶ï¼Œ<a href="https://github.com/Mrs4s/go-cqhttp" class=" wrap external" target="_blank" rel="nofollow noreferrer">go-cqhttp</a> ä½œä¸º qq æœºå™¨äººå®¢æˆ·ç«¯ï¼Œå®ç°æ‹›ç”Ÿé—®ç­”åŠŸèƒ½ã€‚</p><p data-pid="C8wJ-1F9">ä»£ç åœ¨æ–‡æœ«ã€‚</p><h2>é…ç½® go-cqhttp</h2><p data-pid="umt341ZH">æ€»ä¹‹é¦–å…ˆè¦è®¿é—®ä¸€ä¸‹ <a href="https://github.com/Mrs4s/go-cqhttp" class=" wrap external" target="_blank" rel="nofollow noreferrer">go-cqhttp</a>ï¼Œå» release é‡Œä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œæˆ‘æ˜¯ç›´æ¥åœ¨ windows ä¸Šæµ‹è¯•çš„ï¼Œæ‰€ä»¥å°±ä¸‹è½½äº† <a href="https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-beta2/go-cqhttp_windows_amd64.exe" class=" wrap external" target="_blank" rel="nofollow noreferrer">go-cqhttp_windows_amd64.exe</a>ã€‚</p><p data-pid="KtnaFOC9">å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŠŠ exe æ–‡ä»¶æ”¾è¿›å»ï¼Œæ‰§è¡Œä¸€ä¸‹ï¼Œå…·ä½“å®‰è£…æ–¹æ³•è¯·è§ï¼š</p><a href="https://docs.go-cqhttp.org/guide/quick_start.html" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">å¼€å§‹ | go-cqhttp å¸®åŠ©ä¸­å¿ƒ</a><p data-pid="d5cKekyd">æå®šååº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><img src="https://pica.zhimg.com/v2-b68f34b037794cbb286441fc86deecb4_b.png" data-size="normal" class="content_image" data-original-token="v2-b68f34b037794cbb286441fc86deecb4"/><figcaption>Image</figcaption></figure><p class="ztext-empty-paragraph"><br/></p><p data-pid="C6Q9mp9I">config.yml å…·ä½“æ€ä¹ˆé…ä¸‹é¢æœ‰è¯´ã€‚</p><h2>ä» NoneBot è¿ç§»åˆ° NoneBot2</h2><p data-pid="FQznl4C2">ç”±äº NoneBot2 å’Œ NoneBot çš„ä¸»ä½“å·®å¼‚ä¸å¤§ï¼Œç†è®ºä¸ŠæŠŠ NoneBot çš„æ’ä»¶æ¬è¿‡å»ï¼Œç¨å¾®æ”¹äº¿ç‚¹ç‚¹å°±è¡Œäº†ã€‚æˆ‘é€‰æ‹©ç›´æ¥ç”¨ NoneBot2 çš„ nb-cli æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå¼€å§‹å¤ç”¨ä»¥å‰å†™çš„ä»£ç ã€‚</p><p data-pid="OPAEeLV8">NoneBot2 å…·ä½“æ€ä¹ˆå®‰è£…ï¼Œè¯·è§ï¼š<a href="https://v2.nonebot.dev/guide/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">v2.nonebot.dev/guide/</span><span class="invisible"></span></a></p><p data-pid="4qhg4m4i">è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæˆ‘é€‰æ‹© go-cqhttp ä½œä¸º qq å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ NoneBot2 è¿™é‡Œè¦ç”¨ CQHTTP é€‚é…å™¨ã€‚è¯¦æƒ…è§ï¼š<a href="https://v2.nonebot.dev/guide/cqhttp-guide.html" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">v2.nonebot.dev/guide/cq</span><span class="invisible">http-guide.html</span><span class="ellipsis"></span></a>ï¼Œé‡Œé¢ä¹Ÿè¯´æ˜äº† config.yml å¦‚ä½•é…ç½®ã€‚</p><p data-pid="RUjsXc-i">è¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹è¿ç§»ä¸­æˆ‘æ”¹äº†å•¥ï¼š</p><p data-pid="ZowfrpV_">NoneBotï¼š</p><div class="highlight"><pre><code class="language-python"><span class="kn">from</span> <span class="nn">nonebot</span> <span class="kn">import</span> <span class="n">on_command</span><span class="p">,</span> <span class="n">CommandSession</span>
<span class="kn">from</span> <span class="nn">nonebot</span> <span class="kn">import</span> <span class="n">on_natural_language</span><span class="p">,</span> <span class="n">NLPSession</span><span class="p">,</span> <span class="n">IntentCommand</span>
<span class="kn">from</span> <span class="nn">nonebot.helpers</span> <span class="kn">import</span> <span class="n">context_id</span><span class="p">,</span> <span class="n">render_expression</span>
</code></pre></div><p data-pid="JmrIAEc9">åœ¨ä¹‹å‰çš„ NoneBot é‡Œï¼Œæœ‰ä¸€ä¸ªä¸“ç”¨çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å—ï¼Œä½†æ˜¯ NoneBot2 é‡Œå®ƒæ²¡äº†ã€‚äºæ˜¯æˆ‘æŠŠå®ƒä»¬æ¢æˆäº†ï¼š</p><div class="highlight"><pre><code class="language-python"><span class="kn">from</span> <span class="nn">nonebot</span> <span class="kn">import</span> <span class="n">on_command</span>
<span class="kn">from</span> <span class="nn">nonebot.rule</span> <span class="kn">import</span> <span class="n">to_me</span>
<span class="kn">from</span> <span class="nn">nonebot.typing</span> <span class="kn">import</span> <span class="n">T_State</span>
<span class="kn">from</span> <span class="nn">nonebot.adapters</span> <span class="kn">import</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">Event</span>
<span class="kn">import</span> <span class="nn">nonebot.adapters.cqhttp.message</span> <span class="kn">as</span> <span class="nn">message</span>
</code></pre></div><p data-pid="B0ecplon">è¿™æ ·å¯èƒ½å¾ˆä¸ç›´è§‚ï¼Œæˆ‘ç®€å•è¯´è¯´å“ªäº›åŠŸèƒ½çš„å‡½æ•°è¢«æ›¿æ¢äº†ï¼š</p><div class="highlight"><pre><code class="language-python"><span class="nd">@on_command</span><span class="p">(</span><span class="s1">&#39;faq_local&#39;</span><span class="p">)</span>
<span class="n">async</span> <span class="k">def</span> <span class="nf">faq_local</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">CommandSession</span><span class="p">):</span>
<span class="n">raw_question</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="c1"># æ›¿æ¢ä¸º</span>
<span class="nd">@faq.handle</span><span class="p">()</span>
<span class="n">async</span> <span class="k">def</span> <span class="nf">faq_local</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">Event</span><span class="p">):</span>
<span class="n">raw_question</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">get_message</span><span class="p">())</span>

<span class="n">reply</span> <span class="o">=</span> <span class="n">add_at</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">ctx</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">))</span>
<span class="n">session</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">reply</span><span class="p">)</span>
<span class="c1"># æ›¿æ¢ä¸º</span>
<span class="n">reply</span> <span class="o">=</span> <span class="n">add_at</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">get_user_id</span><span class="p">())</span>
<span class="n">faq</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">reply</span><span class="p">))</span> <span class="c1">#è¿™é‡Œæœ‰å‘ï¼Œä¸ç”¨ Message æ„é€ å›å¤ä¼šä½¿ CQ ç å¤±æ•ˆ</span>
</code></pre></div><p data-pid="iMSvDbWT">å…·ä½“æ€ä¹ˆæ›¿æ¢ï¼Œè¿˜æ˜¯å»ºè®®å¤šçœ‹çœ‹<a href="https://v2.nonebot.dev/api/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">v2.nonebot.dev/api/</span><span class="invisible"></span></a>ï¼Œapi ç†Ÿæ‚‰äº†å°±æ–¹ä¾¿å®ç°æ—§åŠŸèƒ½ã€‚</p><h2>æµ‹è¯•</h2><p data-pid="lSj1-hOA">å·¦è¾¹æ˜¯ NoneBotï¼Œå³è¾¹æ˜¯ go-cqhttp</p><figure data-size="normal"><img src="https://pica.zhimg.com/v2-8e83d05108149f70fb60b3b1eb2fd10e_b.jpg" data-caption="" data-size="normal" data-rawwidth="1920" data-rawheight="1080" class="origin_image zh-lightbox-thumb" width="1920" data-original="https://pica.zhimg.com/v2-8e83d05108149f70fb60b3b1eb2fd10e_r.jpg" data-original-token="v2-d60970875508d141584ef638799a0f75"/></figure><p data-pid="L3jbuMEJ">é‚£ä¸ªå°å“ˆå®ƒåˆå›æ¥å•¦ï¼</p><figure data-size="normal"><img src="https://pica.zhimg.com/v2-717145dd4dbbe2b1de607f145c9483f4_b.png" data-size="normal" class="content_image" data-original-token="v2-717145dd4dbbe2b1de607f145c9483f4"/><figcaption>Image</figcaption></figure><h2>ç»“è¯­</h2><p data-pid="fcbTUoMC">ç”±äºè¿ç§»æŒºä»“ä¿ƒçš„ï¼Œæœ‰å¾ˆå¤šå‘éƒ½è¿˜æ²¡å¡«ï¼Œå‡‘åˆç”¨ç”¨ï¼Œä»£ç å·²ç»ä¼ åˆ° GitHub äº†ï¼Œæƒ³å­¦ä¹ çš„å¯ä»¥éšä¾¿æ‹¿å»çœ‹çœ‹ï¼š</p><a href="https://github.com/L-M-Sherlock/HITszQAbot" data-draft-node="block" data-draft-type="link-card" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/L-M-Sherlock</span><span class="invisible">/HITszQAbot</span><span class="ellipsis"></span></a><p data-pid="nJklSALv">å…·ä½“æ€ä¹ˆéƒ¨ç½²æˆ‘ä¼šæ…¢æ…¢æ›´åˆ° README é‡Œé¢ï¼Œå…ˆæ‘¸äº†ã€‚</p>

<hr>
<div class="column" style="margin: 1em 0; padding: 0.5em 1em; border: 2px solid #999; border-radius: 5px;">
<h2>ä¸“æ ï¼šThoughts Memoçš„æ–‡ç« </h2>
</div>
</article>
</body>
</html>